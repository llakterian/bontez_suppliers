{% extends "base.html" %}

{% block title %}Dashboard - Bontez Suppliers{% endblock %}

{% block content %}
<h2>Dashboard</h2>

<div class="dashboard-stats">
    <div class="stat-card">
        <h3>Total Sales</h3>
        <p class="stat-value">KES {{ "{:.2f}".format(total_sales) }}</p>
    </div>
    <div class="stat-card">
        <h3>Total Clients</h3>
        <p class="stat-value">{{ total_clients }}</p>
    </div>
    <div class="stat-card">
        <h3>Amount Paid</h3>
        <p class="stat-value">KES {{ "{:.2f}".format(total_paid) }}</p>
    </div>
    <div class="stat-card">
        <h3>Pending Balance</h3>
        <p class="stat-value">KES {{ "{:.2f}".format(pending_balance) }}</p>
    </div>
</div>

<h3>Recent Sales</h3>
{% if recent_sales %}
    <table class="data-table">
        <thead>
            <tr>
                <th>Date</th>
                <th>Client</th>
                <th>Supplier</th>
                <th>Amount</th>
                <th>Payment Method</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            {% for sale in recent_sales %}
            <tr>
                <td>{{ sale.sale_date.strftime('%Y-%m-%d %H:%M') }}</td>
                <td>{{ sale.client.name }}</td>
                <td>{{ sale.supplier.name if sale.supplier else 'Mixed Gas' }}</td>
                <td>KES {{ "{:.2f}".format(sale.total_amount) }}</td>
                <td>{{ sale.payment_method }}</td>
                <td><a href="{{ url_for('sales.view_sale', sale_id=sale.id) }}">View</a></td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% else %}
    <p>No sales recorded yet.</p>
{% endif %}

<div class="actions">
    <a href="{{ url_for('clients.create_client') }}" class="btn btn-primary">Add Client</a>
    <a href="{{ url_for('sales.create_sale') }}" class="btn btn-primary">Create Sale</a>
</div>
{% endblock %}
